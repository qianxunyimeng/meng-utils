<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>meng-utils å·¥å…·åº“</title><meta name="description" content="Documentation for meng-utils å·¥å…·åº“"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">meng-utils å·¥å…·åº“</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> meng-utils å·¥å…·åº“ </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#util-template" id="util-template" style="color: inherit; text-decoration: none;">
  <h1>util-template</h1>
</a>
<p>ä½¿ç”¨æ¨¡æ¿å…¬å…±åº“</p>
<p>æ¨¡æ¿æä¾›ç»™çš„å‘½ä»¤è¡Œåœ°å€ï¼š</p>
<p><a href="https://github.com/huahuahuahuahuahua/winkcli-main/tree/master/">winkcli-main</a></p>
<p>å®ç°çš„éœ€æ±‚ï¼šğŸ¤”</p>
<ul>
<li>æ”¯æŒç¼–è¾‘å™¨çš„å¿«é€Ÿè¡¥å…¨å’Œæç¤º</li>
<li>è‡ªåŠ¨åŒ–æ„å»º</li>
<li>æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ changlog</li>
<li>ä»£ç é€šè¿‡ lint å’Œæµ‹è¯•åæ‰èƒ½æäº¤ã€å‘å¸ƒ</li>
</ul>

<a href="#æ¶‰åŠçš„åº“" id="æ¶‰åŠçš„åº“" style="color: inherit; text-decoration: none;">
  <h2>æ¶‰åŠçš„åº“</h2>
</a>
<ul>
<li>eslint + @typescript-eslint/parser æ£€æµ‹ts</li>
<li>typescript tsåº“</li>
<li>@rollup tsæ‰“åŒ…å·¥å…·</li>
<li>jest æµ‹è¯•å·¥å…·</li>
<li>@microsoft/api-extractor .d.ts æ‰“åŒ…</li>
<li>gulp æ‰“åŒ…</li>
<li>husky+lint-staged é¢„ç¼–è¯‘</li>
<li>typedoc ç”Ÿæˆæ–‡æ¡£</li>
</ul>

<a href="#ç›®å½•ç»“æ„" id="ç›®å½•ç»“æ„" style="color: inherit; text-decoration: none;">
  <h2>ç›®å½•ç»“æ„</h2>
</a>
<pre><code class="language-shell"><span class="hl-0">â”œâ”€â”€â”€.husky</span><br/><span class="hl-0">â”‚   â””â”€â”€â”€_</span><br/><span class="hl-0">â”œâ”€â”€â”€src   å·¥å…·å¼€å‘</span><br/><span class="hl-0">â”œâ”€â”€â”€README.md æ–‡æ¡£</span><br/><span class="hl-0">â”œâ”€â”€â”€README.tmpl.md å…¬å…±æ–‡æ¡£ï¼ˆå¯ç”ŸæˆREADME.mdï¼‰</span><br/><span class="hl-0">â”œâ”€â”€â”€test  æµ‹è¯• </span><br/><span class="hl-0">â””â”€â”€â”€...é…ç½®æ–‡ä»¶</span><br/>
</code></pre>

<a href="#ç¤ºä¾‹ä»£ç " id="ç¤ºä¾‹ä»£ç " style="color: inherit; text-decoration: none;">
  <h2>ç¤ºä¾‹ä»£ç </h2>
</a>
<p>å¦‚éœ€ç›´æ¥ä½¿ç”¨</p>
<pre><code class="language-shell"><span class="hl-0">npm run build --æ–‡ä»¶æ‰“åŒ…</span><br/><span class="hl-0">npm run dev  --ç›‘å¬tsæ–‡ä»¶</span><br/><span class="hl-0">npm run doc --ç”Ÿæˆæ–‡æ¡£</span><br/><span class="hl-0">npm run lint--æµ‹è¯•</span><br/><span class="hl-0">npm run release--npmå‘å¸ƒ</span>
</code></pre>

<a href="#æ•´ä½“å®ç°" id="æ•´ä½“å®ç°" style="color: inherit; text-decoration: none;">
  <h2>æ•´ä½“å®ç°</h2>
</a>

<a href="#åˆå§‹åŒ–é¡¹ç›®" id="åˆå§‹åŒ–é¡¹ç›®" style="color: inherit; text-decoration: none;">
  <h3>åˆå§‹åŒ–é¡¹ç›®</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">mkdir util-template æ–°å»ºæ–‡ä»¶å¤¹</span><br/><span class="hl-1">cd</span><span class="hl-0"> util-template</span><br/><span class="hl-0">npm init åˆå§‹åŒ–</span>
</code></pre>

<a href="#å®‰è£…-typescript" id="å®‰è£…-typescript" style="color: inherit; text-decoration: none;">
  <h3>å®‰è£… <a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.tslang.cn%2Fdocs%2Fhome.html">TypeScript</a></h3>
</a>
<pre><code><span class="hl-2">npm</span><span class="hl-0"> </span><span class="hl-2">i</span><span class="hl-0"> -</span><span class="hl-3">D</span><span class="hl-0"> </span><span class="hl-2">typescript</span>
</code></pre>
<p>åˆ›å»º <code>src</code> ç›®å½•ï¼Œå…¥å£æ–‡ä»¶ï¼Œä»¥åŠ ts çš„é…ç½®æ–‡ä»¶</p>
<pre><code><span class="hl-2">util</span><span class="hl-0">-</span><span class="hl-2">template</span><br/><span class="hl-0"> |</span><br/><span class="hl-0"> |- </span><span class="hl-2">src</span><br/><span class="hl-0">      |- </span><span class="hl-2">main</span><span class="hl-0">.</span><span class="hl-2">ts</span><br/><span class="hl-0"> |- </span><span class="hl-2">test</span><br/><span class="hl-0">      |- </span><span class="hl-2">main</span><span class="hl-0">.</span><span class="hl-2">test</span><span class="hl-0">.</span><span class="hl-2">ts</span><br/><span class="hl-0"> |- </span><span class="hl-2">tsconfig</span><span class="hl-0">.</span><span class="hl-2">json</span>
</code></pre>

<a href="#tsconfigjsonæ–‡ä»¶é…ç½®" id="tsconfigjsonæ–‡ä»¶é…ç½®" style="color: inherit; text-decoration: none;">
  <h3>tsconfig.jsonæ–‡ä»¶é…ç½®</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-4">&quot;compilerOptions&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">    /* Visit https://aka.ms/tsconfig.json to </span><span class="hl-1">read</span><span class="hl-0"> more about this file */</span><br/><span class="hl-0">    /* Basic Options */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;incremental&quot;</span><span class="hl-0">: true,                         /* Enable incremental compilation */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;target&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;es5&quot;</span><span class="hl-0">, /* Specify ECMAScript target version: </span><span class="hl-4">&#39;ES3&#39;</span><span class="hl-0"> (default), </span><span class="hl-4">&#39;ES5&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2015&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2016&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2017&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2018&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2019&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2020&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;ES2021&#39;</span><span class="hl-0">, or </span><span class="hl-4">&#39;ESNEXT&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;module&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;commonjs&quot;</span><span class="hl-0">, /* Specify module code generation: </span><span class="hl-4">&#39;none&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;commonjs&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;amd&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;system&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;umd&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;es2015&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;es2020&#39;</span><span class="hl-0">, or </span><span class="hl-4">&#39;ESNext&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;lib&quot;</span><span class="hl-0">: [</span><span class="hl-4">&quot;es6&quot;</span><span class="hl-0">],</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;allowJs&quot;</span><span class="hl-0">: true, /* Allow javascript files to be compiled. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;checkJs&quot;</span><span class="hl-0">: true,                             /* Report errors </span><span class="hl-5">in</span><span class="hl-0"> .js files. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;jsx&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;preserve&quot;</span><span class="hl-0">,                           /* Specify JSX code generation: </span><span class="hl-4">&#39;preserve&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;react-native&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;react&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;react-jsx&#39;</span><span class="hl-0"> or </span><span class="hl-4">&#39;react-jsxdev&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;declaration&quot;</span><span class="hl-0">: true, /* Generates corresponding </span><span class="hl-4">&#39;.d.ts&#39;</span><span class="hl-0"> file. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;declarationDir&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;./types&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;declarationMap&quot;</span><span class="hl-0">: true,                      /* Generates a sourcemap </span><span class="hl-5">for</span><span class="hl-0"> each corresponding </span><span class="hl-4">&#39;.d.ts&#39;</span><span class="hl-0"> file. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;sourceMap&quot;</span><span class="hl-0">: true,                           /* Generates corresponding </span><span class="hl-4">&#39;.map&#39;</span><span class="hl-0"> file. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;outFile&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;./&quot;</span><span class="hl-0">,                             /* Concatenate and emit output to single file. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;outDir&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;./&quot;</span><span class="hl-0">,                              /* Redirect output structure to the directory. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;rootDir&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;./&quot;</span><span class="hl-0">,                             /* Specify the root directory of input files. Use to control the output directory structure with --outDir. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;composite&quot;</span><span class="hl-0">: true,                           /* Enable project compilation */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;tsBuildInfoFile&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;./&quot;</span><span class="hl-0">,                     /* Specify file to store incremental compilation information */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;removeComments&quot;</span><span class="hl-0">: true,                      /* Do not emit comments to output. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noEmit&quot;</span><span class="hl-0">: true,                              /* Do not emit outputs. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;importHelpers&quot;</span><span class="hl-0">: true,                       /* Import emit helpers from </span><span class="hl-4">&#39;tslib&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;downlevelIteration&quot;</span><span class="hl-0">: true,                  /* Provide full support </span><span class="hl-5">for</span><span class="hl-0"> </span><span class="hl-2">iterables</span><span class="hl-0"> </span><span class="hl-5">in</span><span class="hl-0"> </span><span class="hl-4">&#39;for-of&#39;</span><span class="hl-0">, spread, and destructuring when targeting </span><span class="hl-4">&#39;ES5&#39;</span><span class="hl-0"> or </span><span class="hl-4">&#39;ES3&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;isolatedModules&quot;</span><span class="hl-0">: true,                     /* Transpile each file as a separate module (similar to </span><span class="hl-4">&#39;ts.transpileModule&#39;</span><span class="hl-0">). */</span><br/><span class="hl-0">    /* Strict Type-Checking Options */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;strict&quot;</span><span class="hl-0">: true, /* Enable all strict type-checking options. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;noImplicitAny&quot;</span><span class="hl-0">: false, /* Raise error on expressions and declarations with an implied </span><span class="hl-4">&#39;any&#39;</span><span class="hl-0"> type. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;strictNullChecks&quot;</span><span class="hl-0">: true,                    /* Enable strict null checks. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;strictFunctionTypes&quot;</span><span class="hl-0">: true,                 /* Enable strict checking of </span><span class="hl-6">function</span><span class="hl-0"> </span><span class="hl-1">types.</span><span class="hl-0"> */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;strictBindCallApply&quot;</span><span class="hl-0">: true,                 /* Enable strict </span><span class="hl-4">&#39;bind&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;call&#39;</span><span class="hl-0">, and </span><span class="hl-4">&#39;apply&#39;</span><span class="hl-0"> methods on functions. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;strictPropertyInitialization&quot;</span><span class="hl-0">: true,        /* Enable strict checking of property initialization </span><span class="hl-5">in</span><span class="hl-0"> classes. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noImplicitThis&quot;</span><span class="hl-0">: true,                      /* Raise error on </span><span class="hl-4">&#39;this&#39;</span><span class="hl-0"> expressions with an implied </span><span class="hl-4">&#39;any&#39;</span><span class="hl-0"> type. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;alwaysStrict&quot;</span><span class="hl-0">: true,                        /* Parse </span><span class="hl-5">in</span><span class="hl-0"> strict mode and emit </span><span class="hl-4">&quot;use strict&quot;</span><span class="hl-0"> </span><span class="hl-5">for</span><span class="hl-0"> each </span><span class="hl-1">source</span><span class="hl-0"> file. */</span><br/><span class="hl-0">    /* Additional Checks */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noUnusedLocals&quot;</span><span class="hl-0">: true,                      /* Report errors on unused locals. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noUnusedParameters&quot;</span><span class="hl-0">: true,                  /* Report errors on unused parameters. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noImplicitReturns&quot;</span><span class="hl-0">: true,                   /* Report error when not all code paths </span><span class="hl-5">in</span><span class="hl-0"> </span><span class="hl-6">function</span><span class="hl-0"> </span><span class="hl-1">return</span><span class="hl-0"> a value. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noFallthroughCasesInSwitch&quot;</span><span class="hl-0">: true,          /* Report errors </span><span class="hl-5">for</span><span class="hl-0"> </span><span class="hl-2">fallthrough cases</span><span class="hl-0"> </span><span class="hl-5">in</span><span class="hl-0"> switch statement. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noUncheckedIndexedAccess&quot;</span><span class="hl-0">: true,            /* Include </span><span class="hl-4">&#39;undefined&#39;</span><span class="hl-0"> </span><span class="hl-5">in</span><span class="hl-0"> index signature results */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noImplicitOverride&quot;</span><span class="hl-0">: true,                  /* Ensure overriding members </span><span class="hl-5">in</span><span class="hl-0"> derived classes are marked with an </span><span class="hl-4">&#39;override&#39;</span><span class="hl-0"> modifier. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;noPropertyAccessFromIndexSignature&quot;</span><span class="hl-0">: true,  /* Require undeclared properties from index signatures to use element accesses. */</span><br/><span class="hl-0">    /* Module Resolution Options */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;moduleResolution&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;node&quot;</span><span class="hl-0">, /* Specify module resolution strategy: </span><span class="hl-4">&#39;node&#39;</span><span class="hl-0"> (Node.js) or </span><span class="hl-4">&#39;classic&#39;</span><span class="hl-0"> (TypeScript pre-1.6). */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;baseUrl&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;./&quot;</span><span class="hl-0">,                             /* Base directory to resolve non-absolute module names. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;paths&quot;</span><span class="hl-0">: {},                                 /* A series of entries which re-map imports to lookup locations relative to the </span><span class="hl-4">&#39;baseUrl&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;rootDirs&quot;</span><span class="hl-0">: [],                              /* List of root folders whose combined content represents the structure of the project at runtime. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;typeRoots&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">      </span><span class="hl-4">&quot;node_modules/@types&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-4">&quot;@types&quot;</span><br/><span class="hl-0">    ], /* List of folders to include </span><span class="hl-1">type</span><span class="hl-0"> definitions from. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;types&quot;</span><span class="hl-0">: [],                                 /* Type declaration files to be included </span><span class="hl-5">in</span><span class="hl-0"> compilation. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;allowSyntheticDefaultImports&quot;</span><span class="hl-0">: true, /* Allow default imports from modules with no default export. This does not affect code emit, just typechecking. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;esModuleInterop&quot;</span><span class="hl-0">: true, /* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects </span><span class="hl-5">for</span><span class="hl-0"> all imports. Implies </span><span class="hl-4">&#39;allowSyntheticDefaultImports&#39;</span><span class="hl-0">. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;preserveSymlinks&quot;</span><span class="hl-0">: true,                    /* Do not resolve the real path of symlinks. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;allowUmdGlobalAccess&quot;</span><span class="hl-0">: true,                /* Allow accessing UMD globals from modules. */</span><br/><span class="hl-0">    /* Source Map Options */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;sourceRoot&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;&quot;</span><span class="hl-0">,                            /* Specify the location where debugger should locate TypeScript files instead of </span><span class="hl-1">source</span><span class="hl-0"> locations. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;mapRoot&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;&quot;</span><span class="hl-0">,                               /* Specify the location where debugger should locate map files instead of generated locations. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;inlineSourceMap&quot;</span><span class="hl-0">: true,                     /* Emit a single file with </span><span class="hl-1">source</span><span class="hl-0"> maps instead of having a separate file. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;inlineSources&quot;</span><span class="hl-0">: true,                       /* Emit the </span><span class="hl-1">source</span><span class="hl-0"> alongside the sourcemaps within a single file; requires </span><span class="hl-4">&#39;--inlineSourceMap&#39;</span><span class="hl-0"> or </span><span class="hl-4">&#39;--sourceMap&#39;</span><span class="hl-0"> to be set. */</span><br/><span class="hl-0">    /* Experimental Options */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;experimentalDecorators&quot;</span><span class="hl-0">: true,              /* Enables experimental support </span><span class="hl-5">for</span><span class="hl-0"> ES7 decorators. */</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;emitDecoratorMetadata&quot;</span><span class="hl-0">: true,               /* Enables experimental support </span><span class="hl-5">for</span><span class="hl-0"> emitting </span><span class="hl-1">type</span><span class="hl-0"> metadata </span><span class="hl-5">for</span><span class="hl-0"> decorators. */</span><br/><span class="hl-0">    /* Advanced Options */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;skipLibCheck&quot;</span><span class="hl-0">: true, /* Skip </span><span class="hl-1">type</span><span class="hl-0"> checking of declaration files. */</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;forceConsistentCasingInFileNames&quot;</span><span class="hl-0">: </span><span class="hl-1">true</span><span class="hl-0"> /* Disallow inconsistently-cased references to the same file. */</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-4">&quot;exclude&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;node_modules&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;dist&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;gulpfile.js&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;jest.config.js&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;rollup.config.js&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-4">&quot;include&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;src&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;*.js&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;test&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;types&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;gulpfile.ts&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#é…ç½®-tsconfigeslintjson" id="é…ç½®-tsconfigeslintjson" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® tsconfig.eslint.json</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">/* tsconfig.eslint.json */</span><br/><span class="hl-0">{</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;compilerOptions&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;baseUrl&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;.&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;resolveJsonModule&quot;</span><span class="hl-0">: true,</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;forceConsistentCasingInFileNames&quot;</span><span class="hl-0">:true,</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;strict&quot;</span><span class="hl-0">: </span><span class="hl-1">true</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;include&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;**/*.ts&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;**/*.js&quot;</span><br/><span class="hl-0">    ],</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#é…ç½®-eslintrcjs" id="é…ç½®-eslintrcjs" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® .eslintrc.js</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">// .eslintrc.js</span><br/><span class="hl-0">const eslintrc = {</span><br/><span class="hl-0">  root: true,</span><br/><span class="hl-0">  parser: </span><span class="hl-4">&quot;@typescript-eslint/parser&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  plugins: [</span><span class="hl-4">&quot;@typescript-eslint&quot;</span><span class="hl-0">],</span><br/><span class="hl-0">  overrides: [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      files: [</span><span class="hl-4">&quot;*.ts&quot;</span><span class="hl-0">, </span><span class="hl-4">&quot;*.tsx&quot;</span><span class="hl-0">], // Your TypeScript files extension</span><br/><br/><span class="hl-0">      // As mentioned </span><span class="hl-5">in</span><span class="hl-0"> the comments, you should extend TypeScript plugins here,</span><br/><span class="hl-0">      // instead of extending them outside the </span><span class="hl-4">`overrides`</span><span class="hl-0">.</span><br/><span class="hl-0">      // If you don</span><span class="hl-4">&#39;t want to extend any rules, you don&#39;</span><span class="hl-0">t need an </span><span class="hl-4">`extends`</span><span class="hl-0"> attribute.</span><br/><span class="hl-0">      extends: [</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;plugin:@typescript-eslint/recommended-requiring-type-checking&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      ],</span><br/><br/><span class="hl-0">      parserOptions: {</span><br/><span class="hl-0">        project: [</span><span class="hl-4">&quot;./tsconfig.json&quot;</span><span class="hl-0">], // Specify it only </span><span class="hl-5">for</span><span class="hl-0"> TypeScript files</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  extends: [</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;eslint:recommended&quot;</span><span class="hl-0">, // eslint æ¨èè§„åˆ™</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="hl-0">, // ts æ¨èè§„åˆ™</span><br/><span class="hl-0">    // </span><span class="hl-4">&quot;plugin:@typescript-eslint/eslint-recommended&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  env: {</span><br/><span class="hl-0">    browser: true,</span><br/><span class="hl-0">    node: true,</span><br/><span class="hl-0">    es6: true,</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  parserOptions: {</span><br/><span class="hl-0">    project: </span><span class="hl-4">&quot;./tsconfig.eslint.json&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    ecmaVersion: 2019,</span><br/><span class="hl-0">    sourceType: </span><span class="hl-4">&quot;module&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    ecmaFeatures: {</span><br/><span class="hl-0">      experimentalObjectRestSpread: true,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  rules: {}, // è‡ªå®šä¹‰</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-0">module.exports = eslintrc;</span>
</code></pre>

<a href="#é…ç½®-rollupå®‰è£…è¯·çœ‹packagejson" id="é…ç½®-rollupå®‰è£…è¯·çœ‹packagejson" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® rollup(å®‰è£…è¯·çœ‹package.json)</h3>
</a>

<a href="#é…ç½®-babelrc" id="é…ç½®-babelrc" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® .babelrc</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">/* .babelrc */</span><br/><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-4">&quot;presets&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    [</span><br/><span class="hl-0">      </span><span class="hl-4">&quot;@babel/preset-env&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      {</span><br/><span class="hl-0">        /* Babel ä¼šåœ¨ Rollup æœ‰æœºä¼šåšå¤„ç†ä¹‹å‰ï¼Œå°†æˆ‘ä»¬çš„æ¨¡å—è½¬æˆ CommonJSï¼Œå¯¼è‡´ Rollup çš„ä¸€äº›å¤„ç†å¤±è´¥ */</span><br/><span class="hl-0">        </span><span class="hl-4">&quot;modules&quot;</span><span class="hl-0">: </span><span class="hl-1">false</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    ]</span><br/><span class="hl-0">  ]</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#é…ç½®rollupconfigjs" id="é…ç½®rollupconfigjs" style="color: inherit; text-decoration: none;">
  <h3>é…ç½®rollup.config.js</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">/*</span><br/><span class="hl-0"> * @Author: t_winkjqzhang</span><br/><span class="hl-0"> * @Date: 2022-03-31 14:34:38</span><br/><span class="hl-0"> * @LastEditTime: 2022-04-08 00:11:18</span><br/><span class="hl-0"> * @Description: Do not edit</span><br/><span class="hl-0"> */</span><br/><span class="hl-0">import resolve from </span><span class="hl-4">&quot;@rollup/plugin-node-resolve&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import path from </span><span class="hl-4">&quot;path&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import commonjs from </span><span class="hl-4">&quot;rollup-plugin-commonjs&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import typescript from </span><span class="hl-4">&quot;@rollup/plugin-typescript&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import json from </span><span class="hl-4">&quot;@rollup/plugin-json&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import babel from </span><span class="hl-4">&quot;@rollup/plugin-babel&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import { DEFAULT_EXTENSIONS } from </span><span class="hl-4">&quot;@babel/core&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import replace from </span><span class="hl-4">&quot;@rollup/plugin-replace&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import { uglify } from </span><span class="hl-4">&quot;rollup-plugin-uglify&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import clear from </span><span class="hl-4">&quot;rollup-plugin-clear&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import nodePolyfills from </span><span class="hl-4">&quot;rollup-plugin-polyfill-node&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">import pkg from </span><span class="hl-4">&quot;./package.json&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">const production = process.env.NODE_ENV === </span><span class="hl-4">&quot;production&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">const development = process.env.NODE_ENV === </span><span class="hl-4">&quot;development&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">const ext = production ? </span><span class="hl-4">&quot;min.js&quot;</span><span class="hl-0"> </span><span class="hl-1">:</span><span class="hl-0"> </span><span class="hl-4">&quot;js&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">/** è¾“å…¥çš„æ–‡ä»¶å¤¹ */</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_input_path = </span><span class="hl-4">&quot;src&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-0">/** è¾“å‡ºçš„æ–‡ä»¶å¤¹ */</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_ouput_path = </span><span class="hl-4">&quot;dist&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">/** éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶åï¼ˆä¸å¸¦åç¼€åï¼‰ */</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_input_file_name_no_ext_list = pkg._need_handle_files;</span><br/><span class="hl-0">//æ’ä»¶é…ç½®</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_plugins_01 = [</span><br/><span class="hl-0">  //æ¸…é™¤distæ‰“åŒ…æ–‡ä»¶</span><br/><span class="hl-0">  clear({</span><br/><span class="hl-0">    targets: [</span><span class="hl-4">&quot;dist&quot;</span><span class="hl-0">],</span><br/><span class="hl-0">  }),</span><br/><span class="hl-0">  // ts çš„åŠŸèƒ½åªåœ¨äºç¼–è¯‘å‡ºå£°æ˜æ–‡ä»¶ï¼Œæ‰€ä»¥ target ä¸º ESNextï¼Œç¼–è¯‘äº¤ç»™ babel æ¥åš</span><br/><span class="hl-0">  typescript({</span><br/><span class="hl-0">    tsconfig: </span><span class="hl-4">&quot;./tsconfig.json&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  }),</span><br/><span class="hl-0">  //Allows the node builtins to be d/ed.requireimport</span><br/><span class="hl-0">  </span><span class="hl-1">nodePolyfills</span><span class="hl-0">(),</span><br/><span class="hl-0">  resolve({</span><br/><span class="hl-0">    // å°†è‡ªå®šä¹‰é€‰é¡¹ä¼ é€’ç»™è§£ææ’ä»¶</span><br/><span class="hl-0">    customResolveOptions: {</span><br/><span class="hl-0">      moduleDirectory: </span><span class="hl-4">&quot;node_modules&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  }),</span><br/><span class="hl-0">  </span><span class="hl-1">commonjs</span><span class="hl-0">(), // é…åˆ commnjs è§£æç¬¬ä¸‰æ–¹æ¨¡å—</span><br/><span class="hl-0">  babel({</span><br/><span class="hl-0">    babelHelpers: </span><span class="hl-4">&quot;runtime&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    // åªè½¬æ¢æºä»£ç ï¼Œä¸è¿è¡Œå¤–éƒ¨ä¾èµ–</span><br/><span class="hl-0">    exclude: </span><span class="hl-4">&quot;node_modules/**&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    // babel é»˜è®¤ä¸æ”¯æŒ ts éœ€è¦æ‰‹åŠ¨æ·»åŠ </span><br/><span class="hl-0">    extensions: [...DEFAULT_EXTENSIONS, </span><span class="hl-4">&quot;.ts&quot;</span><span class="hl-0">],</span><br/><span class="hl-0">  }),</span><br/><span class="hl-0">  //ä¸€ä¸ªæ±‡æ€»æ’ä»¶ï¼Œå¯å°† .json æ–‡ä»¶è½¬æ¢ä¸º ES6 æ¨¡å—ã€‚</span><br/><span class="hl-0">  </span><span class="hl-1">json</span><span class="hl-0">(),</span><br/><span class="hl-0">];</span><br/><span class="hl-0">//æ·»åŠ ä¸‘åŒ–æ’ä»¶</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_plugins_02 = </span><span class="hl-1">g_d_plugins_01.concat([uglify</span><span class="hl-0">()]);</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_3rd_lib_dep = [</span><span class="hl-4">&quot;axios&quot;</span><span class="hl-0">];</span><br/><span class="hl-1">let</span><span class="hl-0"> g_d_tasks_list = [].concat(</span><br/><span class="hl-0">  // æ‰“åŒ…æˆæ— ä¾èµ–ã€æœ‰å‹ç¼©çš„ umd æ–‡ä»¶ï¼Œé€‚ç”¨äºé¡µé¢é€šè¿‡ amdã€cmdã€ç›´æ¥å¼•å…¥çš„æ–¹å¼ä½¿ç”¨</span><br/><span class="hl-0">  // ï¼ˆå› ä¸ºè¦èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œæ‰€ä»¥ä¾èµ–å¿…é¡»æ‰“åŒ…è¿›å»ï¼Œæ–‡ä»¶ä¹Ÿå¿…é¡»å‹ç¼©ï¼‰</span><br/><span class="hl-0">  g_d_input_file_name_no_ext_list.map</span><span class="hl-4">((name) </span><span class="hl-0">=&gt;</span><span class="hl-4"> {</span><br/><span class="hl-0">    let d_replace_obj = {};</span><br/><span class="hl-0">    g_d_input_file_name_no_ext_list.forEach</span><span class="hl-4">((n) </span><span class="hl-0">=&gt;</span><span class="hl-4"> {</span><br/><span class="hl-0">      d_replace_obj[`${n}.ts`] = n;</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> {</span><br/><span class="hl-0">      //amdä¸ºAMDæ ‡å‡†ï¼Œcjsä¸ºCommonJSæ ‡å‡†ï¼Œesm</span><span class="hl-7">\e</span><span class="hl-0">sä¸ºESæ¨¡å—æ ‡å‡†ï¼Œiifeä¸ºç«‹å³è°ƒç”¨å‡½æ•°ï¼Œ umdåŒæ—¶æ”¯æŒamdã€cjså’Œiifeã€‚</span><br/><span class="hl-0">      input: </span><span class="hl-4">`</span><span class="hl-2">${g_d_input_path}</span><span class="hl-4">/</span><span class="hl-2">${name}</span><span class="hl-4">.ts`</span><span class="hl-0">,</span><br/><span class="hl-0">      output: [</span><br/><span class="hl-0">        // è¾“å‡º commonjs è§„èŒƒçš„ä»£ç </span><br/><span class="hl-0">        {</span><br/><span class="hl-0">          file: </span><span class="hl-4">` </span><span class="hl-2">${g_d_ouput_path}</span><span class="hl-4">/</span><span class="hl-2">${name}</span><span class="hl-4">.js`</span><span class="hl-0">,</span><br/><span class="hl-0">          format: </span><span class="hl-4">&quot;cjs&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">          name: pkg.name,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        // è¾“å‡º es è§„èŒƒçš„ä»£ç </span><br/><span class="hl-0">        {</span><br/><span class="hl-0">          file: </span><span class="hl-4">`</span><span class="hl-2">${g_d_ouput_path}</span><span class="hl-4">/</span><span class="hl-2">${name}</span><span class="hl-4">.esm.js`</span><span class="hl-0">,</span><br/><span class="hl-0">          format: </span><span class="hl-4">&quot;esm&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">      ],</span><br/><span class="hl-0">      external: g_d_3rd_lib_dep.concat(</span><br/><span class="hl-0">        g_d_input_file_name_no_ext_list</span><br/><span class="hl-0">          .filter</span><span class="hl-4">((n) </span><span class="hl-0">=&gt;</span><span class="hl-4"> n </span><span class="hl-0">!==</span><span class="hl-4"> name)</span><br/><span class="hl-0">          .map((n) =&gt; path.resolve(`./src/${n}.ts`))</span><br/><span class="hl-0">      ),</span><br/><span class="hl-0">      plugins: g_d_plugins_02.concat(</span><br/><span class="hl-0">        replace({</span><br/><span class="hl-0">          values: d_replace_obj,</span><br/><span class="hl-0">          preventAssign: true,</span><br/><span class="hl-0">        })</span><br/><span class="hl-0">      ),</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">);</span><br/><br/><span class="hl-6">export</span><span class="hl-0"> default g_d_tasks_list;</span>
</code></pre>

<a href="#é…ç½®-jest" id="é…ç½®-jest" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® jest</h3>
</a>
<p>å·¥å…·åº“éœ€è¦å†™æµ‹è¯•</p>

<a href="#å®‰è£…" id="å®‰è£…" style="color: inherit; text-decoration: none;">
  <h3>å®‰è£…</h3>
</a>
<pre><code><span class="hl-2">yarn</span><span class="hl-0"> </span><span class="hl-2">add</span><span class="hl-0"> -</span><span class="hl-3">D</span><span class="hl-0"> @</span><span class="hl-2">types</span><span class="hl-0">/</span><span class="hl-2">jest</span><span class="hl-0"> </span><span class="hl-2">eslint</span><span class="hl-0">-</span><span class="hl-2">plugin</span><span class="hl-0">-</span><span class="hl-2">jest</span><span class="hl-0"> </span><span class="hl-2">jest</span><span class="hl-0"> </span><span class="hl-2">ts</span><span class="hl-0">-</span><span class="hl-2">jest</span>
</code></pre>

<a href="#é…ç½®-jestconfigjs" id="é…ç½®-jestconfigjs" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® jest.config.js</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">// jest.config.js</span><br/><span class="hl-0">module.exports = {</span><br/><span class="hl-0">  preset: </span><span class="hl-4">&#39;ts-jest&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  testEnvironment: </span><span class="hl-4">&#39;node&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#maints" id="maints" style="color: inherit; text-decoration: none;">
  <h3>main.ts</h3>
</a>
<pre><code class="language-shell"><span class="hl-4">&quot;use strict&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-0">// é™æ€åŠ è½½</span><br/><br/><span class="hl-6">export</span><span class="hl-0"> </span><span class="hl-6">function</span><span class="hl-0"> </span><span class="hl-1">main()</span><span class="hl-0"> {</span><br/><span class="hl-0">  console.log(</span><span class="hl-4">&quot;hello world&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">}</span><br/><span class="hl-6">export</span><span class="hl-0"> default main;</span>
</code></pre>

<a href="#maintestts" id="maintestts" style="color: inherit; text-decoration: none;">
  <h3>main.test.ts</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">import main from </span><span class="hl-4">&quot;../src/main&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">describe(</span><span class="hl-4">&quot;Name of the group&quot;</span><span class="hl-0">, () =&gt; {</span><br/><span class="hl-0">  test(</span><span class="hl-4">&quot;should &quot;</span><span class="hl-0">, () =&gt; {</span><br/><span class="hl-0">    console.log = </span><span class="hl-1">jest.fn</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-1">main</span><span class="hl-0">();</span><br/><span class="hl-0">    // The first argument of the first call to the </span><span class="hl-6">function</span><span class="hl-0"> </span><span class="hl-1">was</span><span class="hl-0"> </span><span class="hl-4">&#39;hello&#39;</span><br/><span class="hl-0">    expect(console.log).toHaveBeenCalledWith(</span><span class="hl-4">&quot;hello world&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#å¢åŠ -packagejson-scripts" id="å¢åŠ -packagejson-scripts" style="color: inherit; text-decoration: none;">
  <h3>å¢åŠ  package.json scripts</h3>
</a>
<pre><code class="language-shell"><span class="hl-4">&quot;test&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;jest --coverage --verbose -u&quot;</span>
</code></pre>
<ul>
<li>coverage è¾“å‡ºæµ‹è¯•è¦†ç›–ç‡</li>
<li>verbose å±‚æ¬¡æ˜¾ç¤ºæµ‹è¯•å¥—ä»¶ä¸­æ¯ä¸ªæµ‹è¯•çš„ç»“æœï¼Œä¼šçœ‹ç€æ›´åŠ ç›´è§‚å•¦</li>
</ul>

<a href="#é…ç½®-gulpfile" id="é…ç½®-gulpfile" style="color: inherit; text-decoration: none;">
  <h3>é…ç½® gulpfile</h3>
</a>
<p>æ„å»ºæµç¨‹ğŸ¤” </p>
<ol>
<li>eslintæ£€æµ‹ä»£ç --taskeslint</li>
<li>åˆ é™¤ distæ–‡ä»¶ï¼ŒRollup é‡æ–°æ‰“åŒ… --taskBuildTsProject</li>
<li>è¯»å–commitï¼Œå†™åˆ°æ—¥å¿—--taskchangelog</li>
<li>æ„å»ºæ–‡æ¡£ --exports.buildTypes </li>
<li>api-extractor ç”Ÿæˆç»Ÿä¸€çš„å£°æ˜æ–‡ä»¶ï¼Œç„¶å åˆ é™¤å¤šä½™çš„å£°æ˜æ–‡ä»¶</li>
<li>ç”Ÿæˆumdå’Œesmçš„æ¨¡å—ä»£ç  --taskBuildUmdEsm</li>
<li>å®Œæˆ</li>
</ol>
<pre><code class="language-shell"><span class="hl-0">//eslintæ£€æµ‹ä»£ç --jestæµ‹è¯•</span><br/><span class="hl-0">const taskeslint = () =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-5">return</span><span class="hl-0"> new Promise(function (resolve, reject) {</span><br/><span class="hl-0">    const cmdStr = </span><span class="hl-4">`</span><span class="hl-2">${path.resolve(</span><br/><span class="hl-2">      </span><span class="hl-4">&quot;./node_modules/.bin/eslint&quot;</span><br/><span class="hl-2">    )}</span><span class="hl-4"> --fix --ext .js,.ts  </span><span class="hl-2">${paths.src}</span><span class="hl-4">`</span><span class="hl-0">;</span><br/><span class="hl-0">    exec(cmdStr, (err, stdout, stderr) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-5">if</span><span class="hl-0"> (err) {</span><br/><span class="hl-0">        console.log(err);</span><br/><span class="hl-0">        console.warn(new </span><span class="hl-1">Date</span><span class="hl-0">(), </span><span class="hl-4">&quot; eslintç¼–è¯‘å‘½ä»¤æ‰§è¡Œå¤±è´¥&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">      } </span><span class="hl-5">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        console.log(stdout);</span><br/><span class="hl-0">        console.warn(new </span><span class="hl-1">Date</span><span class="hl-0">(), </span><span class="hl-4">&quot; eslintç¼–è¯‘å‘½ä»¤æ‰§è¡ŒæˆåŠŸ&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    });</span><br/><br/><span class="hl-0">    </span><span class="hl-1">resolve</span><span class="hl-0">();</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">};</span>
</code></pre>
<pre><code class="language-shell"><span class="hl-0">/** åˆ é™¤ distæ–‡ä»¶ï¼ŒRollup é‡æ–°æ‰“åŒ… */</span><br/><span class="hl-0">const taskBuildTsProject = (done) =&gt; {</span><br/><span class="hl-0">  const cmdStr = </span><span class="hl-4">`</span><span class="hl-2">${path.resolve(</span><span class="hl-4">&quot;./node_modules/.bin/rollup&quot;</span><span class="hl-2">)}</span><span class="hl-4"> -c`</span><span class="hl-0">;</span><br/><span class="hl-0">  exec(cmdStr, (err, stdout, stderr) =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-5">if</span><span class="hl-0"> (err) {</span><br/><span class="hl-0">      console.log(err);</span><br/><span class="hl-0">      console.warn(new </span><span class="hl-1">Date</span><span class="hl-0">(), </span><span class="hl-4">&quot; æ‰“åŒ…æ‰§è¡Œå¤±è´¥&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    } </span><span class="hl-5">else</span><span class="hl-0"> {</span><br/><span class="hl-0">      console.log(stdout);</span><br/><span class="hl-0">      console.warn(new </span><span class="hl-1">Date</span><span class="hl-0">(), </span><span class="hl-4">&quot; æ‰“åŒ…æ‰§è¡ŒæˆåŠŸ&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">  </span><span class="hl-1">done</span><span class="hl-0">();</span><br/><span class="hl-0">};</span>
</code></pre>
<pre><code class="language-shell"><span class="hl-0">è¯»å–commitï¼Œå†™åˆ°æ—¥å¿—</span><br/><span class="hl-0">//è¯»å–commit ä¿®æ”¹CHANGELOG.md</span><br/><span class="hl-0">const taskchangelog = async (cb) =&gt; {</span><br/><span class="hl-0">  const changelogPath = path.join(paths.root, </span><span class="hl-4">&quot;CHANGELOG.md&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">  // å¯¹å‘½ä»¤ conventional-changelog -p angular -i CHANGELOG.md -w -r 0</span><br/><span class="hl-0">  const changelogPipe = await conventionalChangelog({</span><br/><span class="hl-0">    preset: </span><span class="hl-4">&quot;angular&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    releaseCount: 0,</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">  changelogPipe.setEncoding(</span><span class="hl-4">&quot;utf8&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  const resultArray = [</span><span class="hl-4">&quot;# å·¥å…·åº“æ›´æ–°æ—¥å¿—\n\n&quot;</span><span class="hl-0">];</span><br/><span class="hl-0">  changelogPipe.on(</span><span class="hl-4">&quot;data&quot;</span><span class="hl-0">, (chunk) =&gt; {</span><br/><span class="hl-0">    // åŸæ¥çš„ commits è·¯å¾„æ˜¯è¿›å…¥æäº¤åˆ—è¡¨</span><br/><span class="hl-0">    chunk = chunk.replace(/</span><span class="hl-7">\/</span><span class="hl-0">commits</span><span class="hl-7">\/</span><span class="hl-0">/g, </span><span class="hl-4">&quot;/commit/&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    resultArray.push(chunk);</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">  changelogPipe.on(</span><span class="hl-4">&quot;end&quot;</span><span class="hl-0">, </span><span class="hl-1">async</span><span class="hl-0"> () =&gt; {</span><br/><span class="hl-0">    await fs.createWriteStream(changelogPath).write(resultArray.join(</span><span class="hl-4">&quot;&quot;</span><span class="hl-0">));</span><br/><span class="hl-0">    </span><span class="hl-1">cb</span><span class="hl-0">();</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">};</span>
</code></pre>
<pre><code class="language-shell"><span class="hl-0">æ„å»ºæ–‡æ¡£(ä»£ç è¿‡å¤šä¸å±•ç¤º)</span><br/><span class="hl-0">exports.buildTypes = gulp.series(</span><br/><span class="hl-0">  taskCleanTypes,--æ¸…é™¤ types æ–‡ä»¶</span><br/><span class="hl-0">  taskOutputTypes,--ä½¿ç”¨ tsc è¾“å‡º .d.ts</span><br/><span class="hl-0">  taskCleanTypesDirUnuseFile,--æ¸…é™¤ types æ–‡ä»¶</span><br/><span class="hl-0">  exports.doc --type doc ä»»åŠ¡</span><br/><span class="hl-0">  apiExtractorGenerate</span><br/><span class="hl-0">);</span><br/>
</code></pre>

<a href="#ä¼˜åŒ–å¼€å‘æµç¨‹" id="ä¼˜åŒ–å¼€å‘æµç¨‹" style="color: inherit; text-decoration: none;">
  <h3>ä¼˜åŒ–å¼€å‘æµç¨‹</h3>
</a>

<a href="#å®‰è£…-1" id="å®‰è£…-1" style="color: inherit; text-decoration: none;">
  <h3>å®‰è£…</h3>
</a>
<pre><code><span class="hl-2">yarn</span><span class="hl-0"> </span><span class="hl-2">add</span><span class="hl-0"> -</span><span class="hl-3">D</span><span class="hl-0"> </span><span class="hl-2">husky</span><span class="hl-0"> </span><span class="hl-2">lint</span><span class="hl-0">-</span><span class="hl-2">staged</span>
</code></pre>

<a href="#packagejson" id="packagejson" style="color: inherit; text-decoration: none;">
  <h3>package.json</h3>
</a>
<pre><code><span class="hl-0">  </span><span class="hl-4">&quot;husky&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;hooks&quot;</span><span class="hl-2">:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-4">&quot;pre-commit&quot;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-4">&quot;lint-staged &amp; jest -u&quot;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-4">&quot;lint-staged&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">    </span><span class="hl-4">&quot;*.{.ts,.js}&quot;</span><span class="hl-2">:</span><span class="hl-0"> [</span><br/><span class="hl-0">      </span><span class="hl-4">&quot;eslint&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-4">&quot;git add&quot;</span><br/><span class="hl-0">    ]</span><br/><span class="hl-0">  }</span><br/>
</code></pre>
<p>ä¹‹åæäº¤ä»£ç éƒ½ä¼šå…ˆ lint éªŒè¯ï¼Œå† jest æµ‹è¯•é€šè¿‡ï¼Œæ‰å¯ä»¥æäº¤ã€‚è§„èŒƒå›¢é˜Ÿåä½œçš„ä»£ç è§„èŒƒ</p>

<a href="#ä»“åº“åœ°å€" id="ä»“åº“åœ°å€" style="color: inherit; text-decoration: none;">
  <h3>ä»“åº“åœ°å€</h3>
</a>
<p><a href="https://github.com/huahuahuahuahuahua/util-template">huahuahuahuahuahua/util-template: æä¾›ç»™winkcli-mainçš„æ¨¡æ¿åº“ (github.com)</a></p>

<a href="#å‚è€ƒ" id="å‚è€ƒ" style="color: inherit; text-decoration: none;">
  <h2>å‚è€ƒ</h2>
</a>
<p><a href="https://juejin.cn/post/6844904035309322254#heading-36">TypeScriptã€Rollup æ­å»ºå·¥å…·åº“ - æ˜é‡‘ (juejin.cn)</a></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.gulpjs.com.cn%2Fdocs%2Fgetting-started%2Fquick-start%2F">gulp</a></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2016%2F01%2Fcommit_message_change_log.html">Commit message å’Œ Change log ç¼–å†™æŒ‡å—</a></p>

<a href="#æœ¬æ–‡ç« é“¾æ¥ï¼š" id="æœ¬æ–‡ç« é“¾æ¥ï¼š" style="color: inherit; text-decoration: none;">
  <h4>æœ¬æ–‡ç« é“¾æ¥ï¼š</h4>
</a>
<p><a href="https://juejin.cn/post/7083911355509506055/">å­¦ä¹ ç”¨ts+gulp+rollupå†™ä¸€ä¸ªå·¥å…·åº“ - æ˜é‡‘ (juejin.cn)</a></p>

<a href="#support" id="support" style="color: inherit; text-decoration: none;">
  <h2>Support</h2>
</a>
<p>Tested in Chrome 74-75, Firefox 66-67, IE 11, Edge 18, Safari 11-12, &amp; Node.js 8-12.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>LICENSE</h2>
</a>
<p>MIT</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/dom.html">dom</a></li><li class=" tsd-kind-module"><a href="modules/string.html">string</a></li><li class=" tsd-kind-module"><a href="modules/utils.html">utils</a></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="assets/main.js"></script></body></html>